# OpenAI Configuration
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_TRANSLATION_MODEL=gpt-4o-mini

# Backend Configuration
BACKEND_PORT=8000
CORS_ORIGINS=["*"]

# Transcription Providers
DEEPGRAM_API_KEY=your-deepgram-api-key-here
GOOGLE_CLOUD_CREDENTIALS=./google-credentials.json
ASSEMBLYAI_API_KEY=your-assemblyai-api-key-here

# AssemblyAI EU endpoint (optional)
# ASSEMBLYAI_STREAMING_BASE_URL=wss://streaming.eu.assemblyai.com/v3/ws

# Translation Providers
DEEPL_API_KEY=your-deepl-api-key-here

# ============================================
# Translation Optimization Settings
# ============================================

# Two-pass translation: Fast preview on is_final, refined on speech_final
# Gives immediate feedback while ensuring quality final translation
ENABLE_TWO_PASS_TRANSLATION=true

# Syntax/grammar fix via GPT before translation (adds latency)
# Only applies when quality_mode=quality AND two-pass refine
ENABLE_SYNTAX_FIX=false

# Timeout for translation requests in ms (default: 5000)
TRANSLATION_TIMEOUT_MS=5000

# AAA: Fast pass timeout - lower for responsiveness (default: 2000)
# Fast pass shows preview quickly, refine pass takes more time for quality
TRANSLATION_TIMEOUT_FAST_MS=2000

# Minimum words before translating (default: 3)
MIN_WORDS_FOR_TRANSLATION=3

# AAA: Auto-flush sentence after N words (default: 15)
# Prevents long sentences from building up - forces earlier translation
MAX_WORDS_BEFORE_FLUSH=15

# Timeout for syntax fix GPT call in ms (default: 3000)
SYNTAX_FIX_TIMEOUT_MS=3000

# Adaptive syntax fix threshold (only run syntax fix if confidence < this, default: 0.85)
ADAPTIVE_SYNTAX_THRESHOLD=0.85

# Adaptive confidence system - absolute minimum for adaptive system (default: 0.3)
ADAPTIVE_MIN_CONFIDENCE=0.3

# Minimum interval between translation requests in ms (debounce)
TRANSLATION_RATE_LIMIT_MS=100

# DeepL formality level (default|more|less|prefer_more|prefer_less)
DEEPL_FORMALITY=default

# DeepL retry delay for rate limiting backoff (default: 250ms)
DEEPL_RETRY_DELAY_MS=250

# AAA: DeepL fast/quality split_sentences tuning
# Fast uses "0" (single sentence), Quality uses "nonewlines" (careful splitting)
DEEPL_FAST_SPLIT_SENTENCES=0
DEEPL_QUALITY_SPLIT_SENTENCES=nonewlines

# DeepL glossary ID for consistent terminology (optional)
# Create at: https://www.deepl.com/your-account/glossaries
DEEPL_GLOSSARY_ID=

# ============================================
# Deepgram STT Optimization Settings
# ============================================

# Deepgram model to use (nova-2 or nova-3)
# nova-3 is latest with best accuracy, nova-2 is slightly faster
DEEPGRAM_MODEL=nova-3

# Utterance end detection in milliseconds (default: 400)
# Lower = faster sentence end detection, Higher = more complete sentences
DEEPGRAM_UTTERANCE_END_MS=400

# AAA: Adaptive endpointing per mode (overrides DEEPGRAM_UTTERANCE_END_MS based on qualityMode)
# Fast mode: Lower value for quicker response (default: 280ms)
# Quality mode: Higher value for more complete sentences (default: 600ms)
DEEPGRAM_UTTERANCE_END_FAST_MS=280
DEEPGRAM_UTTERANCE_END_QUALITY_MS=600

# Enable VAD (Voice Activity Detection) events
# Provides speech start/end notifications
DEEPGRAM_VAD_EVENTS=true

# ============================================
# Partial Translation & Backpressure Settings
# ============================================

# AAA: Translate interim/partial results for faster feedback
# Interval in ms between partial translation requests (default: 400)
PARTIAL_TRANSLATE_INTERVAL_MS=400

# Minimum characters before translating a partial (default: 20)
PARTIAL_TRANSLATE_MIN_CHARS=20

# AAA: Backpressure - reduce translation frequency when translator is slow
# If p95 latency exceeds this threshold, reduce partial translation frequency
BACKPRESSURE_P95_THRESHOLD_MS=800

# Multiplier for min_chars when backpressure is engaged (default: 1.5)
# Higher = fewer partial translations when under pressure
BACKPRESSURE_MIN_CHARS_MULTIPLIER=1.5
